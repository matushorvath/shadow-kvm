version: 1

# ShadowKVM automatically switches your monitor’s input source when you attach or detach
# a keyboard or mouse. For example, when you connect a keyboard to your computer, ShadowKVM
# can switch your monitor to HDMI1, and when you disconnect the keyboard, it can switch 
# the monitor to HDMI2.

# Trigger device; defines which device type will trigger monitor switching
# options: keyboard or mouse (or one of the GUID_DEVINTERFACE_* guids)
trigger-device: keyboard

# Log level; controls the level of detail in the log files
# options: information (default) or debug
log-level: information

# Monitor Identification
# 
# You can specify monitors using one or more of these attributes:
#   description: Monitor model name as recognized by Windows
#   adapter: The graphics adapter associated with the monitor
#   serial-number: A unique identifier for the monitor (recommended if you have identical monitors)
#
# If Shadow KVM can detect your monitor's serial number, using it is the most reliable way
# to ensure ShadowKVM targets the correct display.

# Monitor Actions
#
# When a trigger device is attached or detached, ShadowKVM sends a DDC/CI command to the monitor
# to change its input source. The DDC/CI command has a command code and a value:
#   code: usually input-select (0x60) for input source selection
#   value: varies based on the monitor’s supported inputs
#
# Bot DDC/CI command code and value can be specified as either a string or as an 8-bit number
#
# Supported command codes are:
#   input-select (0x60)
#
# Supported command values are:
#   analog-1 (1), analog-2 (2), dvi-1 (3), dvi-2 (4), composite-1 (5), composite-2 (6),
#   s-video-1 (7), s-video-2 (8), tuner-1 = (9), tuner-2 = (10), tuner-3 = (11),
#   component-1 (12),  component-2 (13), component-4 (14),
#   displayport-1 (15), displayport-2 = (16), hdmi-1 (17), hdmi-2 (18)

monitors:
{{#each Monitors}}
  - description: {{Monitor.Description}}
    adapter: {{Monitor.Adapter}}
    serial-number: {{Monitor.SerialNumber}}
    attach:
      code: input-select
      value: {{Inputs.SelectedInputHexString}}
    detach:
      code: input-select
      value: {{Inputs.UnselectedInputHexStringAndComment}}

{{/each}}

{{! TODO filter out missing serial number and missing adapter }}
{{! TODO filter out or comment out monitors that don't support DDC/CI }}
