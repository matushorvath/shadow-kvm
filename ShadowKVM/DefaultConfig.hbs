version: 1

# ShadowKVM automatically switches your monitor’s input source when you attach or detach
# a keyboard or mouse. For example, when you connect a keyboard to your computer, ShadowKVM
# can switch your monitor to HDMI1, and when you disconnect the keyboard, it can switch 
# the monitor to HDMI2.

# Trigger device; defines which device type will trigger monitor switching
# options: keyboard or mouse
device-type: keyboard

# Log level; controls the level of detail in the log files
# options: information (default) or debug
log-level: information

# Monitor Identification
# 
# You can specify monitors using one or more of these attributes:
#   description: Monitor model name as recognized by Windows
#   adapter: The graphics adapter associated with the monitor
#   serial-number: A unique identifier for the monitor (recommended if you have identical monitors)
#
# If Shadow KVM can detect your monitor's serial number, using it is the most reliable way
# to ensure ShadowKVM targets the correct display.

# Monitor Actions
#
# When a trigger device is attached or detached, ShadowKVM sends a DDC/CI command to the monitor
# to change its input source. The DDC/CI command has a command code and a value:
#   code: usually 0x60 for input source selection
#   value: varies based on the monitor’s supported inputs

monitors:
{{#each Monitors}}
  - description: {{Monitor.Description}}
    adapter: {{Monitor.Adapter}}
    serial-number: {{Monitor.SerialNumber}}
    attach:
      code: 0x60
      value: {{Inputs.SelectedInputHexString}}
    detach:
      code: 0x60
      value: 0x12

{{/each}}

{{! TODO filter out missing serial number and missing adapter }}
{{! TODO filter out or comment out monitors that don't support DDC/CI }}
{{! TODO select correct value for attach/detach, comment all valid values }}
